decluttering_templates: !include "../decluttering_templates.yaml"
title: Dashboard Principal
views:
  ########################################
  # Principal
  ########################################
  - title: Principal
    type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr 1fr 1fr
      grid-template-rows: auto auto auto auto auto
      grid-template-areas: |-
        "p z v o"
        "x x w w"
        "y y y y"
        "a a b b"
        "upcoming_movie upcoming_movie upcoming_tv upcoming_tv"
        "plex_h_movies plex_h_movies plex_h_movies plex_h_series"
        "e f g h"
      place-content: stretch
      mediaquery:
        '(max-width: 1000px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "z"
            "v"
            "x"
            "w"
            "y"
            "a"
            "b"
            "upcoming_movie"
            "plex_h_movies"
            "upcoming_tv"
            "plex_h_series"
            "e"
            "f"
            "g"
            "h"
    cards:   
      - type: custom:mushroom-person-card
        entity: person.cha
        icon_type: entity-picture
        badge_icon: |
          {% if is_state('input_select.cha', 'Home') %}
            mdi:home
          {% elif is_state(config.entity, 'away') or
                  is_state(config.entity, 'unavailable') %}
            mdi:map-marker-question-outline
          {% endif %}  
        badge_color: |-
          {% if is_state('input_select.cha', 'Home') %}
            green
          {% else %}
            red
          {% endif %}   
        view_layout:
          grid-area: z             
      - type: custom:mushroom-person-card 
        entity: person.kaeko
        icon_type: entity-picture
        badge_icon: |
          {% if is_state('input_select.cha', 'Home') %}
            mdi:home
          {% elif is_state(config.entity, 'away') or
                  is_state(config.entity, 'unavailable') %}
            mdi:map-marker-question-outline
          {% endif %}  
        badge_color: |-
          {% if is_state('input_select.cha', 'Home') %}
            green
          {% else %}
            red
          {% endif %}             
        view_layout:
          grid-area: v 
      - type: horizontal-stack
        cards:
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:home"></ha-icon> Aperçu
          template: details
          tap_action:
            action: navigate
            navigation_path: /preview-dashboard/subview-apercu   
          styles:
            card:
              - height: 60px
              - width: 200px          
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:floor-plan"></ha-icon> Rez-de-chaussée
          template: details
          tap_action:
            action: navigate
            navigation_path: /floorplan-rdc-dashboard/floorplan 
          styles:
            card:
              - height: 60px
              - width: 200px  
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:floor-plan"></ha-icon> Etage
          template: details
          tap_action:
            action: navigate
            navigation_path: /floorplan-etage-dashboard/floorplan    
          styles:
            card:
              - height: 60px
              - width: 200px                        
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:thermometer"></ha-icon> Températures
          template: details
          tap_action:
            action: navigate
            navigation_path: /preview-dashboard/subview-temperatures    
          styles:
            card:
              - height: 60px
              - width: 200px  
        view_layout:
          grid-area: x 
      - type: horizontal-stack
        cards:
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:lightning-bolt"></ha-icon> Energie
          template: details
          tap_action:
            action: navigate
            navigation_path: /preview-dashboard/subview-energie    
          styles:
            card:
              - height: 60px
              - width: 200px  
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:information-slab-circle-outline"></ha-icon> Systèmes
          template: details
          tap_action:
            action: navigate
            navigation_path: /preview-dashboard/subview-systems      
          styles:
            card:
              - height: 60px
              - width: 200px                        
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:thermometer"></ha-icon> Températures
          template: details
          tap_action:
            action: navigate
            navigation_path: /preview-dashboard/subview-temperatures    
          styles:
            card:
              - height: 60px
              - width: 200px  
        - type: custom:button-card
          name: |
              <ha-icon icon="mdi:lightning-bolt"></ha-icon> Energie
          template: details
          tap_action:
            action: navigate
            navigation_path: /preview-dashboard/subview-energie    
          styles:
            card:
              - height: 60px
              - width: 200px   
        view_layout:
          grid-area: w                                    
      - type: custom:hourly-weather
        entity: weather.forecast_maison
        num_segments: 24 # optional, defaults to 12
        name: Prochaines 24h # optional, defaults to "Hourly Weather"
        show_wind: true
        view_layout:
          place-self: center stretch
          grid-area: y  
        tap_action:
          action: navigate
          navigation_path: /preview-dashboard/2         
      - type: 'custom:plex-meets-homeassistant'
        title: Derniers ajouts de films
        token: kXSsXdoY4A1MxVqDaDZG
        ip: nl6236.dediseedbox.com
        port: 36293
        maxRows: 1
        showSearch: false
        useHorizontalScroll: true
        libraryName: Films H
        sort: addedAt:desc
        entity:
          plexPlayer:
            - TV 2020
            - TV 2018
            - TV 2021
        view_layout:
          place-self: center stretch
          grid-area: plex_h_movies     
      - type: 'custom:plex-meets-homeassistant'
        title: Derniers ajouts de séries      
        token: kXSsXdoY4A1MxVqDaDZG
        ip: nl6236.dediseedbox.com
        port: 36293
        maxRows: 1
        libraryName: Series TV H
        showSearch: false
        useHorizontalScroll: true        
        sort: addedAt:desc
        entity:
          plexPlayer:
            - TV 2020
            - TV 2018  
            - TV 2021    
        view_layout:
          place-self: center stretch
          grid-area: plex_h_series                                     
      - type: markdown
        title: Ecran large
        content: |
          {% for i in range(0, 5 ) %}
            <ha-alert alert-type="info">{{ states.sensor.ecran_large_rss.attributes.entries[i].title }}</br> [Lien]({{ states.sensor.ecran_large_rss.attributes.entries[i].link }})</ha-alert>
          {% endfor %}
            D'autres articles sur [Ecran Large](https://www.ecranlarge.com/)
        view_layout:
          place-self: stretch stretch
          grid-area: e              
      - type: markdown
        title: Journal du Geek
        content: |
          {% for i in range(0, 5 ) %}
            <ha-alert alert-type="info">{{ states.sensor.journal_du_geek_rss.attributes.entries[i].title }}</br> [Lien]({{ states.sensor.journal_du_geek_rss.attributes.entries[i].link }})</ha-alert>
          {% endfor %}
            D'autres articles sur [Journal du Geek](https://www.journaldugeek.com/)
        view_layout:
          place-self: cestretchnter stretch
          grid-area: f              
      - type: markdown
        title: Jeux vidéos
        content: |
          {% for i in range(0, 5 ) %}
            <ha-alert alert-type="info">{{ states.sensor.jeux_videos_rss.attributes.entries[i].title }}</br> [Lien]({{ states.sensor.jeux_videos_rss.attributes.entries[i].link }})</ha-alert>
          {% endfor %}
            D'autres articles sur [Jeux Vidéos](https://www.jeuxvideo.com/)                                    
        view_layout:
          place-self: stretch stretch
          grid-area: g  
      - type: markdown
        title: Les alexiens
        content: |
          {% for i in range(0, 5 ) %}
            <ha-alert alert-type="info">{{ states.sensor.les_alexiens_rss.attributes.entries[i].title }}</br> [Lien]({{ states.sensor.les_alexiens_rss.attributes.entries[i].link }})</ha-alert>
          {% endfor %}
            D'autres articles sur [Les alexiens](https://www.lesalexiens.fr/)
        view_layout:
          place-self: stretch stretch
          grid-area: h                          
  #################################################
  # Securité
  #################################################
  - title: Securité
    type: custom:grid-layout
    layout:
      grid-template-columns: 1fr 1fr 1fr
      grid-template-rows: auto auto auto
      grid-template-areas: |-
        "y z x"
        "a b c"
        "d e f"
      place-content: stretch
      mediaquery:
        '(max-width: 1000px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "z"
            "a"
            "b"
            "c"
            "d"
            "e"
            "f"
    cards:   
      - type: horizontal-stack
        cards:    
          - type: custom:mushroom-person-card
            entity: person.cha
            icon_type: entity-picture
            badge_icon: |
              {% if is_state('input_select.cha', 'Home') %}
                mdi:home
              {% elif is_state(config.entity, 'away') or
                      is_state(config.entity, 'unavailable') %}
                mdi:map-marker-question-outline
              {% endif %}  
            badge_color: |-
              {% if is_state('input_select.cha', 'Home') %}
                green
              {% else %}
                red
              {% endif %}     
          - type: custom:mushroom-person-card 
            entity: person.kaeko
            icon_type: entity-picture
            badge_icon: |
              {% if is_state('input_select.cha', 'Home') %}
                mdi:home
              {% elif is_state(config.entity, 'away') or
                      is_state(config.entity, 'unavailable') %}
                mdi:map-marker-question-outline
              {% endif %}  
            badge_color: |-
              {% if is_state('input_select.cha', 'Home') %}
                green
              {% else %}
                red
              {% endif %}             
        view_layout:
          grid-area: z       
      - type: custom:vertical-stack-in-card
        cards:
          - type: picture-entity
            show_state: true
            show_name: true
            camera_view: live
            entity: camera.cam_hall_high
            camera_image: camera.cam_hall_high
            tap_action:
              action: none
          - type: entities
            entities:
              - entity: switch.cam_hall_privacy_mode
              - entity: select.cam_hall_recording_mode
              - entity: binary_sensor.cam_hall_is_dark
        view_layout:
          grid-area: a      
      - type: custom:vertical-stack-in-card
        cards:
          - type: picture-entity
            show_state: true
            show_name: true
            camera_view: live
            entity: camera.cam_stairs_high
            camera_image: camera.cam_stairs_high
            tap_action:
              action: none
          - type: entities
            entities:
              - entity: switch.cam_stairs_privacy_mode
              - entity: select.cam_stairs_recording_mode
              - entity: binary_sensor.cam_stairs_is_dark
        view_layout:
          place-self: center stretch
          grid-area: b               
      - type: custom:vertical-stack-in-card
        cards:
          - type: picture-entity
            show_state: true
            show_name: true
            camera_view: live
            entity: camera.cam_living_high
            camera_image: camera.cam_living_high
            tap_action:
              action: none
          - type: entities
            entities:
              - entity: switch.cam_living_privacy_mode
              - entity: select.cam_living_recording_mode
              - entity: binary_sensor.cam_living_is_dark     
        view_layout:
          grid-area: c   
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Accès extérieur               
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a480085c50
              - name: Porte d'entrée       
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a48007e0ab
              - name: Porte Terrasse     
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a4800866c1
              - name: Fenêtre gauche   
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a480087588
              - name: Fenêtre droite                 
        view_layout:
          grid-area: d                                                       
  #################################################
  # Meteo
  #################################################
  - title: Meteo          
    type: custom:grid-layout
    layout:
      grid-template-columns: repeat(4, 1fr)
      grid-template-rows: auto auto auto auto
      grid-template-areas: |-
        "z z z z"
        "y y x x"
        "a b b b"
        "c b b b"
        "d e f g"
      place-content: stretch
      mediaquery:
        '(max-width: 1000px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "z"
            "y"
            "x"
            "a"
            "c"
            "d"
            "e"
            "f"
            "g" 
            "b"     
    cards: 
    - type: custom:hourly-weather
      entity: weather.forecast_maison
      num_segments: 24 # optional, defaults to 12
      name: Prochaines 24h # optional, defaults to "Hourly Weather"
      show_wind: true
      view_layout:
        place-self: center stretch
        grid-area: z
    - type: entities
      entities:
        - entity: sensor.next_sunrise
          name: Lever du soleil
        - entity: sensor.next_sunset
          name: Coucher du soleil
      view_layout:
        place-self: center stretch
        grid-area: y          
    - type: entities
      entities:
        - entity: sensor.ws2900_v2_02_01_max_daily_gust
          name: Rafale maximale 
        - entity: sensor.ws2900_v2_02_01_total_rain
          name: Pluie totale    
      view_layout:
        grid-area: x
    - type: custom:weather-chart-card
      entity: weather.forecast_maison
      show_main: false
      show_current_condition: false
      show_attributes: false
      animated_icons: true
      units:
        speed: km/h 
      view_layout:
        place-self: center stretch
        grid-area: a             
    - type: iframe
      aspect_ratio: 50%
      url: "https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=7&overlay=wind&product=ecmwf&level=surface&lat=50.17&lon=4.329&pressure=true&message=true"              
      view_layout:
        place-self: center stretch
        grid-area: b  
    - type: custom:apexcharts-card
      config_templates:
        - meteo
      header:
        show: true
        show_states: true
        colorize_states: true
      graph_span: 36h
      all_series_config:
        stroke_width: 1
      series:
        - entity: sensor.ws2900_v2_02_01_outdoor_temperature
          name: Temperature
          show:
            extremas: true
        - entity: sensor.ws2900_v2_02_01_feels_like_temperature
          name: Ressentie
        - entity: sensor.ws2900_v2_02_01_windchill
          name: Refroidissement Eolien
        - entity: sensor.ws2900_v2_02_01_dewpoint
          name: Rosée
      view_layout:
        grid-area: c
    - type: custom:apexcharts-card
      config_templates:
        - meteo
      header:
        show: true
        title: Vent
        show_states: true
        colorize_states: true
      graph_span: 36h
      all_series_config:
        stroke_width: 1
        show:
          extremas: max
      series:
        - entity: sensor.ws2900_v2_02_01_wind_speed
          name: Vitesse
        - entity: sensor.ws2900_v2_02_01_wind_gust
          name: Rafale
          opacity: 0.2
          type: area
      view_layout:
        grid-area: d            
    - type: custom:apexcharts-card
      config_templates:
        - meteo
      header:
        show: true
        title: Pluie
        show_states: true
        colorize_states: true
      graph_span: 1d
      all_series_config:
        stroke_width: 1
        show:
          extremas: max
      yaxis:
        - id: rate
        - id: total
          opposite: true
      series:
        - entity: sensor.ws2900_v2_02_01_rain_rate
          name: Pluviométrie
          type: column
          stroke_width: 2
          yaxis_id: rate
          color: rebeccapurple
        - entity: sensor.ws2900_v2_02_01_total_rain
          yaxis_id: total
      view_layout:
        grid-area: e            
    - type: custom:apexcharts-card
      config_templates:
        - meteo
      header:
        show: true
        title: Pression
        show_states: true
        colorize_states: true
      graph_span: 2d
      all_series_config:
        stroke_width: 1
        show:
          extremas: true
      series:
        - entity: sensor.ws2900_v2_02_01_relative_pressure
          name: Pression
      view_layout:
        grid-area: f            
    - type: custom:apexcharts-card
      config_templates:
        - meteo
      header:
        show: true
        title: Humidité
        show_states: true
        colorize_states: true
      graph_span: 1d
      all_series_config:
        stroke_width: 1
        show:
          extremas: true
      series:
        - entity: sensor.ws2900_v2_02_01_humidity
          name: Humidité
      view_layout:
        grid-area: g     

  #################################################
  # Media
  #################################################
  - title: Media          
    type: custom:grid-layout
    layout:
      grid-template-columns: repeat(4, 1fr)
      grid-template-rows: auto auto auto auto
      grid-template-areas: |-
        "z z z z"
        "y y x x"
        "a b b b"
        "c b b b"
        "d e f g"
      place-content: stretch
      mediaquery:
        '(max-width: 1000px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "z"
            "y"
            "a"
            "c"
            "d"
            "e"
            "f"
            "g"      
    cards: 
    - type: custom:mini-media-player
      entity: media_player.spotify_akazukin_chacha       

#################################################
# Calendar
#################################################
  - title: Rendez-vous          
    type: custom:grid-layout
    layout:
      grid-template-columns: repeat(4, 1fr)
      grid-template-rows: auto auto auto auto
      grid-template-areas: |-
        "z z z z"
        "z z z z"
        "y y x x"
        "a b b b"
        "c b b b"
        "d e f g"
      place-content: stretch
      mediaquery:
        '(max-width: 1000px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "z"
            "y"
            "a"
            "c"
            "d"
            "e"
            "f"
            "g"      
    cards: 
    - type: calendar
      initial_view: dayGridMonth
      entities:
      - calendar.cha
      - calendar.van
      card_mod:
        style: |
          ha-full-calendar { height: calc(100vh - (2 * var(--header-height))) !important;}
      view_layout:
        place-self: stretch stretch
        grid-area: z

###############################################################
# SUBVIEWS : Températures
###############################################################
  - type: custom:horizontal-layout
    title: Températures
    subview: true
    path: subview-temperatures
    back_path: /preview-dashboard/0
    layout:
      max_cols: 3
    cards:
      - type: thermostat
        entity: climate.kachafresh
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Pièces
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature_with_feels_like
              variables:
                - entity: sensor.sonoff_a4800849a0_temperature
                - humidity: sensor.sonoff_a4800849a0_humidity
                - feels_like: sensor.temperature_ressentie_antre_cha
                - name: Antre Cha  
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.temperature_ressentie_antre_cha
                  color: '#B694E7'  
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));}
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature_with_feels_like
              variables:
                - entity: sensor.sonoff_a4800849a3_temperature
                - humidity: sensor.sonoff_a4800849a3_humidity
                - feels_like: sensor.temperature_ressentie_antre_van
                - name: Antre Vanessa
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.temperature_ressentie_antre_van
                  color: '#B694E7'
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));}   
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature_with_feels_like
              variables:
                - entity: sensor.sonoff_a480085bf0_temperature
                - humidity: sensor.sonoff_a480085bf0_humidity
                - feels_like: sensor.temperature_ressentie_chambre
                - name: Chambre à coucher
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.temperature_ressentie_chambre
                  color: '#B694E7'
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));}   
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature_with_feels_like
              variables:
                - entity: sensor.sonoff_a480085bef_temperature
                - humidity: sensor.sonoff_a480085bef_humidity
                - feels_like: sensor.temperature_ressentie_salle_de_bain
                - name: Salle de bain
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.temperature_ressentie_salle_de_bain
                  color: '#B694E7'
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));}   
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature_with_feels_like
              variables:
                - entity: sensor.sonoff_a4800866c4_temperature
                - humidity: sensor.sonoff_a4800866c4_humidity
                - feels_like: sensor.temperature_ressentie_cellier
                - name: Cellier
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.temperature_ressentie_cellier
                  color: '#B694E7'
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));}   
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Zones
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature_with_feels_like
              variables:
                - entity: sensor.sonoff_a4800866c9_temperature
                - humidity: sensor.sonoff_a4800866c9_humidity
                - feels_like: sensor.temperature_ressentie_salon
                - name: Rez-de-chaussée
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.temperature_ressentie_salon
                  color: '#B694E7'
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));}              
          - type: custom:stack-in-card
            mode: horizontal  
            cards:
            - type: custom:decluttering-card
              template: temperature
              variables:
                - entity: sensor.armoire_hwg_ste_temperature
                - name: Armoire informatique
            - type: custom:mini-graph-card
              entities:
                - entity: sensor.armoire_hwg_ste_temperature
                  color: '#B694E7'
              hours_to_show: 24
              line_width: 2
              color_thresholds:
                - value: 0
                  color: "#45b6fe"
                - value: 20
                  color: "#08f26e"
                - value: 25
                  color: "#f94449"
              show:
                name: false
                icon: false
                state: false
                legend: false
                fill: gradient
              card_mod:
                style: |
                  :host { flex: 0.5 0.5 0% !important; } 
                  ha-card {border-radius: 25px !important;background: none;box-shadow: none;--ha-card-border-width: 0;padding-top: 0 !important;padding-right: 12px !important;-webkit-mask-image: linear-gradient(to left, rgba(0,0,0,1) 85%, rgba(0,0,0,0));} 

###############################################################
# SUBVIEWS : Energie
###############################################################
  - type: custom:grid-layout
    title: Energie
    subview: true
    path: subview-energie
    back_path: /preview-dashboard/0
    layout:
      grid-template-columns: 1fr 1fr 1fr
      grid-template-rows: auto auto auto
      grid-template-areas: |-
        "a a b"
        "a a c"
        "d d d"
        "e e e"
        "f g h"  
      place-content: stretch
      mediaquery:
        '(max-width: 1000px)':
          grid-template-columns: 1fr
          grid-template-areas: |-
            "a"
            "b"
            "c"
            "d"
            "e"       
            "f"
            "g"
            "h"            
    cards:
      - type: energy-usage-graph
        view_layout:
          grid-area: a     
      - type: energy-distribution
        link_dashboard: true
        view_layout:
          grid-area: b       
      - type: energy-carbon-consumed-gauge
        view_layout:
          grid-area: c       
      - type: energy-sources-table
        view_layout:
          grid-area: d   
      - type: energy-devices-graph
        view_layout:
          grid-area: e    
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Devices
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sm_g986b_battery_level
              - battery: sensor.sm_g986b_battery_level
              - battery_state: sensor.sm_g986b_battery_level
              - name: GSM Cha  
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sm_t800_battery_level
              - battery: sensor.sm_t800_battery_level
              - battery_state: sensor.sm_t800_battery_state              
              - name: Tablette
          - type: section
            label: Antre Cha
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a4800849a0_battery
              - battery: sensor.sonoff_a4800849a0_battery
              - name: Thermomètre     
          - type: section
            label: Antre Vanessa
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a4800849a3_battery
              - battery: sensor.sonoff_a4800849a3_battery
              - name: Thermomètre                    
        view_layout:
          grid-area: f         
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Chambre à coucher
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a480085bf0_battery
              - battery: sensor.sonoff_a480085bf0_battery
              - name: Thermomètre 
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a48007e0ab_battery
              - battery: sensor.sonoff_a48007e0ab_battery
              - name: Détecteur porte terrasse
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.minus_batterie
              - battery: sensor.minus_batterie
              - name: Minus              
          - type: section
            label: Salle de bain
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a480085bef_battery
              - battery: sensor.sonoff_a480085bef_battery
              - name: Thermomètre                       
        view_layout:
          grid-area: g                
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Cellier
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a4800866c4_battery
              - battery: sensor.sonoff_a4800866c4_battery
              - name: Thermomètre            
          - type: section
            label: Salon
          - type: custom:decluttering-card
            template: battery
            variables:
              - entity: sensor.sonoff_a4800866c1_battery
              - battery: sensor.sonoff_a4800866c1_battery
              - name: Thermomètre
          - type: section
            label: Autres
          - type: custom:decluttering-card
            template: battery_no_percent
            variables:
              - entity: binary_sensor.ws2900_v2_02_01_wh65_battery
              - battery: binary_sensor.ws2900_v2_02_01_wh65_battery
              - name: Station météo                                       
        view_layout:
          grid-area: h    

###############################################################
# SUBVIEWS : Systèmes
###############################################################
  - type: custom:horizontal-layout
    title: Systèmes
    path: subview-systems
    back_path: /preview-dashboard/0
    subview: true
    layout:
      max_cols: 3
    badges: []
    cards:
      - type: entities
        title: Router & Internet
        show_header_toggle: false
        entities:
          - entity: sensor.speedtest_upload
            name: Vitesse Upload
          - entity: sensor.speedtest_download
            name: Vitesse Download
          - type: divider
          - entity: sensor.usg_pro_4_uptime
            name: Dernier redémarrage
      - type: entities
        title: Home Assistant
        show_header_toggle: false
        entities:
          - entity: sensor.system_monitor_processor_temperature
            name: Température du processeur
          - type: custom:bar-card
            width: 55%
            height: 2em
            decimal: 0
            unit_of_measurement: '%'
            positions:
              icon: outside
              indicator: 'off'
              name: outside
            severity:
              - color: '#303435'
                from: 0
                to: 89
              - color: '#6d2525'
                from: 90
                to: 100
            entity_row: true
            entities:
              - entity: sensor.system_monitor_processor_use
                name: Utilisation du processeur
          - type: custom:bar-card
            width: 55%
            height: 2em
            decimal: 0
            unit_of_measurement: '%'
            positions:
              icon: outside
              indicator: 'off'
              name: outside
            severity:
              - color: '#303435'
                from: 0
                to: 89
              - color: '#6d2525'
                from: 90
                to: 100
            entity_row: true
            entities:
              - entity: sensor.system_monitor_memory_use_percent
                name: Utilisation de la mémoire
          - type: custom:bar-card
            width: 55%
            height: 2em
            decimal: 0
            unit_of_measurement: '%'
            positions:
              icon: outside
              indicator: 'off'
              name: outside
            severity:
              - color: '#303435'
                from: 0
                to: 89
              - color: '#6d2525'
                from: 90
                to: 100
            entity_row: true
            entities:
              - entity: sensor.system_monitor_swap_use_percent   
                name: Utilisation du swap
          - type: divider
          - entity: sensor.system_monitor_last_boot
            name: Dernier redémarrage
          - entity: input_button.home_assistant_restart
            icon: mdi:restart
            type: button
            name: Redémarrer le système
            tap_action:
              confirmation:
                text: Confirmer le redémarrage du système ?
              action: call-service
              service: script.homeassistant_restart
      - type: entities
        title: Mise à jour ?
        show_header_toggle: false
        entities:
          - type: section
            label: Home assistant
          - entity: update.home_assistant_core_update
          - entity: update.home_assistant_supervisor_update
          - entity: update.home_assistant_operating_system_update
          - entity: update.hacs_update
          - type: section
            label: Pi-hole
          - entity: update.pi_hole_core_update_available
          - entity: update.pi_hole_ftl_update_available
          - entity: update.pi_hole_web_update_available
          - type: section
            label: Plex          
          - entity: update.plex_media_server_hephaistos
          - entity: update.plex_media_server_moloch
          - type: section
            label: Unifi
          - entity: update.usg_pro_4
          - entity: update.us_24_250w
          - entity: update.us_48_500w
          - entity: update.borne_wifi_etage
          - entity: update.borne_wifi_rdc

###############################################################
# SUBVIEWS : Aperçu
###############################################################
  - type: custom:horizontal-layout
    title: Aperçu
    subview: true
    path: subview-apercu
    back_path: /preview-dashboard/0
    layout:
      max_cols: 3         
    cards:
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Accès extérieur
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a480085c50
              - name: Porte d'entrée
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a48007e0ab
              - name: Porte terrasse
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a4800866c1
              - name: Fenêtre salon gauche
          - type: custom:decluttering-card
            template: door
            variables:
              - entity: binary_sensor.sonoff_a480087588
              - name: Fenêtre salon droite              
          - type: section
            label: Antre Cha
          - type: custom:decluttering-card
            template: media_tv
            variables:
              - entity: media_player.tv_antre_cha
              - name: Television    
          - type: custom:decluttering-card
            template: media_tv
            secondary_info: state
            variables:
              - entity: media_player.jbl_bar_300_f5bb_5
              - name: Barre son                          
          - type: custom:decluttering-card
            template: light
            variables:
              - entity: light.hue_color_light_1
              - name: Lampe sous bureau        
          - type: custom:decluttering-card
            template: light
            variables:
              - entity: light.hue_lightstrip_plus_3
              - name: Lightstrip derrière bureau     
          - type: custom:decluttering-card
            template: light
            variables:
              - entity: light.bandeau_tv_antre_cha
              - name: Television, Lumière d'ambiance    
          - type: custom:decluttering-card
            template: light
            variables:
              - entity: light.ecran_pc_cha_haut_droite
              - name: Lampe au dessus du canapé        
          - type: custom:decluttering-card
            template: humidifier
            variables:
              - entity: humidifier.mod150_d2de_humidifier_dehumidifier
              - name: Diffuseur huile essentielle   
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Chambre à coucher
          - type: custom:decluttering-card
            template: media_tv
            variables:
              - entity: media_player.tv_chambre_a_coucher
              - name: Television                 
          - type: custom:decluttering-card
            template: light
            variables:
              - entity: light.projecteur_chambre
              - name: Projecteur 
          - type: custom:xiaomi-vacuum-map-card
            entity: vacuum.minus
            vacuum_platform: Neato
            map_source:
              camera: camera.minus_plan_de_nettoyage
            map_locked: false
            title: Minus
            two_finger_pan: false                          
      - type: entities
        show_header_toggle: false
        entities:
          - type: section
            label: Salon
          - type: custom:decluttering-card
            template: media_tv
            variables:
              - entity: media_player.tv_salon
              - name: Television            
          - type: custom:decluttering-card
            template: humidifier
            variables:
              - entity: humidifier.mod150_d153_humidifier_dehumidifier
              - name: Diffuseur huile essentielle               
                 
###############################################################
# Templates Button card 
###############################################################
button_card_templates:
  details:
    size: 2vw
    show_icon: false
    color: '#9da0a2'
    styles:
      card:
        - color: '#5567ab'
        - width: fit-content
        - border: 0.12vw solid rgba(115, 115, 115, 0.15)
        - transition: none
        - margin: 0
        - overflow: visible
    extra_styles: |
      #name {
        color: rgba(255, 255, 255);
        font-size: var(--tihiti-footer-card-font-size);
        letter-spacing: 0.05vw;
        opacity: 1.0;
      }

      ha-icon {
        width: 20px;
        vertical-align: 7%;
        padding-right: 0.2vw;
        color: rgba(255, 255, 255);
        opacity: 1.0;
      }

      #card {
        padding: var(--tihiti-footer-card-padding-v) var(--tihiti-footer-card-padding-h);
        border-radius: var(--ha-card-border-radius, 12px);
        margin: 0 auto;
        background: #5567ab;
      }

      /* Mobile */
      @media screen and (max-width: 992px) { 
        ha-card { 
          width: 100%;
          margin: 0 2vw;
        }

        #card { 
          padding: calc( var( --tihiti-footer-card-padding-v ) * 4.5 ) var( --tihiti-footer-card-padding-h );
          width: 100% !important;
        }
      }

##################################################
# Templates ApexCharts 
##################################################
apexcharts_card_templates:
  meteo:
    apex_config:
      legend:
        show: false
      grid:
        show: false
      xaxis:
        axisBorder:
          show: false
    all_series_config:
      stroke_width: 1